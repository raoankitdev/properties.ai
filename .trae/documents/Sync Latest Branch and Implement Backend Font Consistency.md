## Branch Sync
- Fetch latest changes and list remote branches sorted by most recent commit.
- Checkout the most recently updated branch (if unclear, default to `origin/main`).
- Verify clean working tree and run a quick test to confirm environment matches the branch.

## Font Consistency (Backend + UI)
- Define a global system font stack: `-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif`.
- Apply the font stack to the Streamlit app root and sidebar in `app_modern.py:1861–1871` and dark theme block around `app_modern.py:1800–1857`.
- Remove scattered inline `font-family: Arial` rules in UI components so they inherit the global stack:
  - `ui/geo_viz.py:292`, `ui/geo_viz.py:357`, `ui/geo_viz.py:399`.
- Preserve monospace areas defined in `assets/css/dark_mode.css:587` (code blocks) and keep email templates’ system stack already used in `notifications/email_templates.py:46`.
- Ensure any HTML generated by notifications continues to use the same stack (already compliant).

## Implementation Details
- Update `apply_theme()` in `app_modern.py` to inject the global font-family into both light and dark themes.
- Replace component-level inline fonts with inherited styling from the global CSS to eliminate duplication.
- Do not add external font downloads; rely on the system stack for performance and privacy.

## Verification
- Run unit tests with `pytest -q` and ensure all pass.
- Launch the app (`run_modern.ps1` or `streamlit run app_modern.py`) and visually verify fonts in:
  - Main content, sidebar, headers, metrics, expanders, chat messages.
  - Dark mode and light mode.
- Confirm notification email preview renders with consistent fonts using existing templates.

## To‑Do List (upon approval)
- Pull and checkout the latest branch.
- Apply global font stack in `app_modern.py` (dark/light themes).
- Remove inline fonts in `ui/geo_viz.py` to inherit global font.
- Verify email templates’ font consistency (no changes expected).
- Run tests and smoke-test the UI in both themes.

## Notes
- No secrets or external assets added; adheres to repository rules and security guidelines.
- Changes are minimal, focused, and revert-friendly; maintain existing dark mode CSS and email template styling.